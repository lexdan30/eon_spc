"use strict";function dtRendererService(e){var r=[],n={showLoading:function(r,n){var t=angular.element(e.compileHtml(n));r.after(t),r.hide(),t.show()},hideLoading:function(r){r.show();var n=r.next();e.isLoading(n)&&n.remove()},renderDataTable:function(e,r){var n="#"+e.attr("id");$.fn.dataTable.isDataTable(n)&&angular.isObject(r)&&(r.destroy=!0);var a=e.DataTable(r),o=e.dataTable(),i={id:e.attr("id"),DataTable:a,dataTable:o};return t(r,i),i},hideLoadingAndRenderDataTable:function(e,r){return n.hideLoading(e),n.renderDataTable(e,r)},registerPlugin:function(e){r.push(e)},postRender:t,preRender:function(e){angular.forEach(r,(function(r){angular.isFunction(r.preRender)&&r.preRender(e)}))}};return n;function t(e,n){angular.forEach(r,(function(r){angular.isFunction(r.postRender)&&r.postRender(e,n)}))}}function dtRenderer(){return{withOptions:function(e){return this.options=e,this}}}function dtDefaultRenderer(e,r,n,t){return{create:function(a){var o,i,d,s=Object.create(r);function c(r,a){i=r,d=a;var c=t.newDTInstance(s),u=n.hideLoadingAndRenderDataTable(r,s.options);return o=u.DataTable,t.copyDTProperties(u,c),e.when(c)}return s.name="DTDefaultRenderer",s.options=a,s.render=c,s.reloadData=function(){},s.changeData=function(){},s.rerender=function(){o.destroy(),n.showLoading(i,d),c(i,d)},s}}}function dtNGRenderer(e,r,n,t,a,o,i){return{create:function(d){var s,c,u,f,l,D,p=Object.create(a);return p.name="DTNGRenderer",p.options=d,p.render=function(e,n,a){s=a,u=e,f=n.$parent,D=i.newDTInstance(p);var d=r.defer(),l=s.match(/<tbody([\s\S]*)<\/tbody>/i)[1],g=l.match(/^\s*.+?\s+in\s+([a-zA-Z0-9\.-_$]*)\s*/m);if(!g)throw new Error('Expected expression in form of "_item_ in _collection_[ track by _id_]" but got "{0}".',l);var R=g[1],m=!1;return f.$watchCollection(R,(function(){c&&m&&T(),t((function(){m=!0,o.preRender(p.options);var e=o.hideLoadingAndRenderDataTable(u,p.options);c=e.DataTable,i.copyDTProperties(e,D),d.resolve(D)}),0,!1)}),!0),d.promise},p.reloadData=function(){e.warn("The Angular Renderer does not support reloading data. You need to do it directly on your model")},p.changeData=function(){e.warn("The Angular Renderer does not support changing the data. You need to change your model directly.")},p.rerender=function(){T(),o.showLoading(u,f),o.preRender(d),t((function(){var e=o.hideLoadingAndRenderDataTable(u,p.options);c=e.DataTable,i.copyDTProperties(e,D)}),0,!1)},p;function T(){l&&l.$destroy(),c.ngDestroy(),u.html(s),l=f.$new(),n(u.contents())(l)}}}}function dtPromiseRenderer(e,r,n,t,a,o){return{create:function(i){var d,s,c,u,f=null,l=Object.create(t);return l.name="DTPromiseRenderer",l.options=i,l.render=D,l.reloadData=function(e,r){var t=d&&d.page()?d.page():0;angular.isFunction(l.options.fnPromise)?p(l.options.fnPromise,g).then((function(n){angular.isFunction(e)&&e(n.DataTable.data()),!1===r&&n.DataTable.page(t).draw(!1)})):n.warn("In order to use the reloadData functionality with a Promise renderer, you need to provide a function that returns a promise.")},l.changeData=function(e){l.options.fnPromise=e,c.dtOptions.fnPromise=e,p(l.options.fnPromise,g)},l.rerender=function(){d.destroy(),a.showLoading(s,c),a.preRender(i),D(s,c)},l;function D(r,n){var t=e.defer();return u=o.newDTInstance(l),s=r,c=n,p(l.options.fnPromise,a.renderDataTable).then((function(e){d=e.DataTable,o.copyDTProperties(e,u),t.resolve(u)})),t.promise}function p(r,n){var t=e.defer();if(angular.isUndefined(r))throw new Error("You must provide a promise or a function that returns a promise!");return f?f.then((function(){t.resolve(T(r,n))})):t.resolve(T(r,n)),t.promise}function T(n,t){var o=e.defer();return(f=angular.isFunction(n)?n():n).then((function(n){var i=n;if(l.options.sAjaxDataProp)for(var d=l.options.sAjaxDataProp.split(".");d.length;){var c=d.shift();c in i&&(i=i[c])}f=null,o.resolve(function(n,t,o,i){var d=e.defer();return delete o.$promise,n.aaData=o,r((function(){a.hideLoading(t),n.bDestroy=!0,d.resolve(i(t,n))}),0,!1),d.promise}(l.options,s,i,t))})),o.promise}function g(e,r){return d.clear(),d.rows.add(r.aaData).draw(r.redraw),{id:u.id,DataTable:u.DataTable,dataTable:u.dataTable}}}}}function dtAjaxRenderer(e,r,n,t,a,o){return{create:function(i){var d,s,c,u=Object.create(n);return u.name="DTAjaxRenderer",u.options=i,u.render=f,u.reloadData=function(e,r){d&&d.ajax.reload(e,r)},u.changeData=function(e){u.options.ajax=e,c.dtOptions.ajax=e},u.rerender=function(){t.preRender(i),f(s,c)},u;function f(n,i){s=n,c=i;var f=e.defer(),l=o.newDTInstance(u);return angular.isUndefined(u.options.sAjaxDataProp)&&(u.options.sAjaxDataProp=a.sAjaxDataProp),angular.isUndefined(u.options.aoColumns)&&(u.options.aoColumns=a.aoColumns),function(n,a){var o=e.defer();n.bDestroy=!0,d&&(d.destroy(),t.showLoading(s,c),a.empty());t.hideLoading(a),function(e){if(angular.isDefined(e)&&angular.isDefined(e.dom))return e.dom.indexOf("S")>=0;return!1}(n)?r((function(){o.resolve(t.renderDataTable(a,n))}),0,!1):o.resolve(t.renderDataTable(a,n));return o.promise}(u.options,n).then((function(e){d=e.DataTable,o.copyDTProperties(e,l),f.resolve(l)})),f.promise}}}}function dtRendererFactory(e,r,n,t){return{fromOptions:function(a,o){if(o){if(a&&a.serverSide)throw new Error("You cannot use server side processing along with the Angular renderer!");return r.create(a)}if(angular.isDefined(a)){if(angular.isDefined(a.fnPromise)&&null!==a.fnPromise){if(a.serverSide)throw new Error("You cannot use server side processing along with the Promise renderer!");return n.create(a)}return angular.isDefined(a.ajax)&&null!==a.ajax||angular.isDefined(a.ajax)&&null!==a.ajax?t.create(a):e.create(a)}return e.create()}}}angular.module("datatables.renderer",["datatables.instances","datatables.factory","datatables.options","datatables.instances"]).factory("DTRendererService",dtRendererService).factory("DTRenderer",dtRenderer).factory("DTDefaultRenderer",dtDefaultRenderer).factory("DTNGRenderer",dtNGRenderer).factory("DTPromiseRenderer",dtPromiseRenderer).factory("DTAjaxRenderer",dtAjaxRenderer).factory("DTRendererFactory",dtRendererFactory),dtRendererService.$inject=["DTLoadingTemplate"],dtDefaultRenderer.$inject=["$q","DTRenderer","DTRendererService","DTInstanceFactory"],dtNGRenderer.$inject=["$log","$q","$compile","$timeout","DTRenderer","DTRendererService","DTInstanceFactory"],dtNGRenderer.$inject=["$log","$q","$compile","$timeout","DTRenderer","DTRendererService","DTInstanceFactory"],dtAjaxRenderer.$inject=["$q","$timeout","DTRenderer","DTRendererService","DT_DEFAULT_OPTIONS","DTInstanceFactory"],dtRendererFactory.$inject=["DTDefaultRenderer","DTNGRenderer","DTPromiseRenderer","DTAjaxRenderer"];