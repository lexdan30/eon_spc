"use strict";function dataTable(e,n,t,a,r,o){return{restrict:"A",scope:{dtOptions:"=",dtColumns:"=",dtColumnDefs:"=",datatable:"@",dtInstance:"="},compile:function(e){var n=e[0].innerHTML;return function(e,t,a,o){function i(e,a){e!==a&&o.render(t,o.buildOptionsPromise(),n)}var l=a.dtDisableDeepWatchers?"$watchCollection":"$watch";angular.forEach(["dtColumns","dtColumnDefs","dtOptions"],(function(n){e[l].call(e,n,i,!0)})),r.showLoading(t,e),o.render(t,o.buildOptionsPromise(),n)}},controller:function(i){var l;function s(e){angular.isFunction(i.dtInstance)?i.dtInstance(e):angular.isDefined(i.dtInstance)&&(i.dtInstance=e)}this.buildOptionsPromise=function(){var a=e.defer();return e.all([e.when(i.dtOptions),e.when(i.dtColumns),e.when(i.dtColumnDefs)]).then((function(a){var r,i=a[0],l=a[1],s=a[2];if(o.deleteProperty(i,"$promise"),o.deleteProperty(l,"$promise"),o.deleteProperty(s,"$promise"),angular.isDefined(i)&&(r={},angular.extend(r,i),angular.isArray(l)&&(r.aoColumns=l),angular.isArray(s)&&(r.aoColumnDefs=s),r.language&&r.language.url)){var u=e.defer(),d=r.language.url;n.get(r.language.url).then((function(e){u.resolve(e)}),(function(){t.error("Could not fetch the content of the language from "+d)})),r.language=u.promise}return o.resolveObjectPromises(r,["data","aaData","fnPromise"])})).then((function(e){a.resolve(e)})),a.promise},this.render=function(e,n,t){n.then((function(n){r.preRender(n);var o=i.datatable&&"ng"===i.datatable;l&&l._renderer?l._renderer.withOptions(n).render(e,i,t).then((function(e){l=e,s(e)})):a.fromOptions(n,o).render(e,i,t).then((function(e){l=e,s(e)}))}))}}}}angular.module("datatables.directive",["datatables.instances","datatables.renderer","datatables.options","datatables.util"]).directive("datatable",dataTable);